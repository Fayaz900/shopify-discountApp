var R,m,ve,H,ne,ye,ge,we,X,G,Y,U={},be=[],Me=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,z=Array.isArray;function S(_,e){for(var t in e)_[t]=e[t];return _}function Z(_){_&&_.parentNode&&_.parentNode.removeChild(_)}function Ue(_,e,t){var n,i,r,c={};for(r in e)r=="key"?n=e[r]:r=="ref"?i=e[r]:c[r]=e[r];if(arguments.length>2&&(c.children=arguments.length>3?R.call(arguments,2):t),typeof _=="function"&&_.defaultProps!=null)for(r in _.defaultProps)c[r]===void 0&&(c[r]=_.defaultProps[r]);return D(_,c,n,i,null)}function D(_,e,t,n,i){var r={type:_,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ve,__i:-1,__u:0};return i==null&&m.vnode!=null&&m.vnode(r),r}function j(_){return _.children}function F(_,e){this.props=_,this.context=e}function E(_,e){if(e==null)return _.__?E(_.__,_.__i+1):null;for(var t;e<_.__k.length;e++)if((t=_.__k[e])!=null&&t.__e!=null)return t.__e;return typeof _.type=="function"?E(_):null}function ke(_){var e,t;if((_=_.__)!=null&&_.__c!=null){for(_.__e=_.__c.base=null,e=0;e<_.__k.length;e++)if((t=_.__k[e])!=null&&t.__e!=null){_.__e=_.__c.base=t.__e;break}return ke(_)}}function oe(_){(!_.__d&&(_.__d=!0)&&H.push(_)&&!L.__r++||ne!=m.debounceRendering)&&((ne=m.debounceRendering)||ye)(L)}function L(){for(var _,e,t,n,i,r,c,u=1;H.length;)H.length>u&&H.sort(ge),_=H.shift(),u=H.length,_.__d&&(t=void 0,i=(n=(e=_).__v).__e,r=[],c=[],e.__P&&((t=S({},n)).__v=n.__v+1,m.vnode&&m.vnode(t),ee(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,i??E(n),!!(32&n.__u),c),t.__v=n.__v,t.__.__k[t.__i]=t,xe(r,t,c),t.__e!=i&&ke(t)));L.__r=0}function Se(_,e,t,n,i,r,c,u,f,l,a){var o,p,s,v,b,y,h=n&&n.__k||be,d=e.length;for(f=Ae(t,e,h,f,d),o=0;o<d;o++)(s=t.__k[o])!=null&&(p=s.__i==-1?U:h[s.__i]||U,s.__i=o,y=ee(_,s,p,i,r,c,u,f,l,a),v=s.__e,s.ref&&p.ref!=s.ref&&(p.ref&&_e(p.ref,null,s),a.push(s.ref,s.__c||v,s)),b==null&&v!=null&&(b=v),4&s.__u||p.__k===s.__k?f=$e(s,f,_):typeof s.type=="function"&&y!==void 0?f=y:v&&(f=v.nextSibling),s.__u&=-7);return t.__e=b,f}function Ae(_,e,t,n,i){var r,c,u,f,l,a=t.length,o=a,p=0;for(_.__k=new Array(i),r=0;r<i;r++)(c=e[r])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=r+p,(c=_.__k[r]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?D(null,c,null,null,null):z(c)?D(j,{children:c},null,null,null):c.constructor==null&&c.__b>0?D(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=_,c.__b=_.__b+1,u=null,(l=c.__i=Ne(c,t,f,o))!=-1&&(o--,(u=t[l])&&(u.__u|=2)),u==null||u.__v==null?(l==-1&&(i>a?p--:i<a&&p++),typeof c.type!="function"&&(c.__u|=4)):l!=f&&(l==f-1?p--:l==f+1?p++:(l>f?p--:p++,c.__u|=4))):_.__k[r]=null;if(o)for(r=0;r<a;r++)(u=t[r])!=null&&(2&u.__u)==0&&(u.__e==n&&(n=E(u)),Ce(u,u));return n}function $e(_,e,t){var n,i;if(typeof _.type=="function"){for(n=_.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=_,e=$e(n[i],e,t));return e}_.__e!=e&&(e&&_.type&&!t.contains(e)&&(e=E(_)),t.insertBefore(_.__e,e||null),e=_.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ne(_,e,t,n){var i,r,c,u=_.key,f=_.type,l=e[t],a=l!=null&&(2&l.__u)==0;if(l===null&&_.key==null||a&&u==l.key&&f==l.type)return t;if(n>(a?1:0)){for(i=t-1,r=t+1;i>=0||r<e.length;)if((l=e[c=i>=0?i--:r++])!=null&&(2&l.__u)==0&&u==l.key&&f==l.type)return c}return-1}function re(_,e,t){e[0]=="-"?_.setProperty(e,t??""):_[e]=t==null?"":typeof t!="number"||Me.test(e)?t:t+"px"}function B(_,e,t,n,i){var r,c;e:if(e=="style")if(typeof t=="string")_.style.cssText=t;else{if(typeof n=="string"&&(_.style.cssText=n=""),n)for(e in n)t&&e in t||re(_.style,e,"");if(t)for(e in t)n&&t[e]==n[e]||re(_.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(we,"$1")),c=e.toLowerCase(),e=c in _||e=="onFocusOut"||e=="onFocusIn"?c.slice(2):e.slice(2),_.l||(_.l={}),_.l[e+r]=t,t?n?t.u=n.u:(t.u=X,_.addEventListener(e,r?Y:G,r)):_.removeEventListener(e,r?Y:G,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in _)try{_[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?_.removeAttribute(e):_.setAttribute(e,e=="popover"&&t==1?"":t))}}function ie(_){return function(e){if(this.l){var t=this.l[e.type+_];if(e.t==null)e.t=X++;else if(e.t<t.u)return;return t(m.event?m.event(e):e)}}}function ee(_,e,t,n,i,r,c,u,f,l){var a,o,p,s,v,b,y,h,d,P,$,A,T,te,N,M,O,k=e.type;if(e.constructor!=null)return null;128&t.__u&&(f=!!(32&t.__u),r=[u=e.__e=t.__e]),(a=m.__b)&&a(e);e:if(typeof k=="function")try{if(h=e.props,d="prototype"in k&&k.prototype.render,P=(a=k.contextType)&&n[a.__c],$=a?P?P.props.value:a.__:n,t.__c?y=(o=e.__c=t.__c).__=o.__E:(d?e.__c=o=new k(h,$):(e.__c=o=new F(h,$),o.constructor=k,o.render=De),P&&P.sub(o),o.props=h,o.state||(o.state={}),o.context=$,o.__n=n,p=o.__d=!0,o.__h=[],o._sb=[]),d&&o.__s==null&&(o.__s=o.state),d&&k.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=S({},o.__s)),S(o.__s,k.getDerivedStateFromProps(h,o.__s))),s=o.props,v=o.state,o.__v=e,p)d&&k.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),d&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(d&&k.getDerivedStateFromProps==null&&h!==s&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(h,$),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(h,o.__s,$)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(o.props=h,o.state=o.__s,o.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(C){C&&(C.__=e)}),A=0;A<o._sb.length;A++)o.__h.push(o._sb[A]);o._sb=[],o.__h.length&&c.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(h,o.__s,$),d&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(s,v,b)})}if(o.context=$,o.props=h,o.__P=_,o.__e=!1,T=m.__r,te=0,d){for(o.state=o.__s,o.__d=!1,T&&T(e),a=o.render(o.props,o.state,o.context),N=0;N<o._sb.length;N++)o.__h.push(o._sb[N]);o._sb=[]}else do o.__d=!1,T&&T(e),a=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++te<25);o.state=o.__s,o.getChildContext!=null&&(n=S(S({},n),o.getChildContext())),d&&!p&&o.getSnapshotBeforeUpdate!=null&&(b=o.getSnapshotBeforeUpdate(s,v)),M=a,a!=null&&a.type===j&&a.key==null&&(M=He(a.props.children)),u=Se(_,z(M)?M:[M],e,t,n,i,r,c,u,f,l),o.base=e.__e,e.__u&=-161,o.__h.length&&c.push(o),y&&(o.__E=o.__=null)}catch(C){if(e.__v=null,f||r!=null)if(C.then){for(e.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;r[r.indexOf(u)]=null,e.__e=u}else{for(O=r.length;O--;)Z(r[O]);J(e)}else e.__e=t.__e,e.__k=t.__k,C.then||J(e);m.__e(C,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):u=e.__e=Be(t.__e,e,t,n,i,r,c,f,l);return(a=m.diffed)&&a(e),128&e.__u?void 0:u}function J(_){_&&_.__c&&(_.__c.__e=!0),_&&_.__k&&_.__k.forEach(J)}function xe(_,e,t){for(var n=0;n<t.length;n++)_e(t[n],t[++n],t[++n]);m.__c&&m.__c(e,_),_.some(function(i){try{_=i.__h,i.__h=[],_.some(function(r){r.call(i)})}catch(r){m.__e(r,i.__v)}})}function He(_){return typeof _!="object"||_==null||_.__b&&_.__b>0?_:z(_)?_.map(He):S({},_)}function Be(_,e,t,n,i,r,c,u,f){var l,a,o,p,s,v,b,y=t.props,h=e.props,d=e.type;if(d=="svg"?i="http://www.w3.org/2000/svg":d=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(l=0;l<r.length;l++)if((s=r[l])&&"setAttribute"in s==!!d&&(d?s.localName==d:s.nodeType==3)){_=s,r[l]=null;break}}if(_==null){if(d==null)return document.createTextNode(h);_=document.createElementNS(i,d,h.is&&h),u&&(m.__m&&m.__m(e,r),u=!1),r=null}if(d==null)y===h||u&&_.data==h||(_.data=h);else{if(r=r&&R.call(_.childNodes),y=t.props||U,!u&&r!=null)for(y={},l=0;l<_.attributes.length;l++)y[(s=_.attributes[l]).name]=s.value;for(l in y)if(s=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")o=s;else if(!(l in h)){if(l=="value"&&"defaultValue"in h||l=="checked"&&"defaultChecked"in h)continue;B(_,l,null,s,i)}}for(l in h)s=h[l],l=="children"?p=s:l=="dangerouslySetInnerHTML"?a=s:l=="value"?v=s:l=="checked"?b=s:u&&typeof s!="function"||y[l]===s||B(_,l,s,y[l],i);if(a)u||o&&(a.__html==o.__html||a.__html==_.innerHTML)||(_.innerHTML=a.__html),e.__k=[];else if(o&&(_.innerHTML=""),Se(e.type=="template"?_.content:_,z(p)?p:[p],e,t,n,d=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,c,r?r[0]:t.__k&&E(t,0),u,f),r!=null)for(l=r.length;l--;)Z(r[l]);u||(l="value",d=="progress"&&v==null?_.removeAttribute("value"):v!=null&&(v!==_[l]||d=="progress"&&!v||d=="option"&&v!=y[l])&&B(_,l,v,y[l],i),l="checked",b!=null&&b!=_[l]&&B(_,l,b,y[l],i))}return _}function _e(_,e,t){try{if(typeof _=="function"){var n=typeof _.__u=="function";n&&_.__u(),n&&e==null||(_.__u=_(e))}else _.current=e}catch(i){m.__e(i,t)}}function Ce(_,e,t){var n,i;if(m.unmount&&m.unmount(_),(n=_.ref)&&(n.current&&n.current!=_.__e||_e(n,null,e)),(n=_.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(r){m.__e(r,e)}n.base=n.__P=null}if(n=_.__k)for(i=0;i<n.length;i++)n[i]&&Ce(n[i],e,t||typeof _.type!="function");t||Z(_.__e),_.__c=_.__=_.__e=void 0}function De(_,e,t){return this.constructor(_,t)}function Fe(_,e,t){var n,i,r,c;e==document&&(e=document.documentElement),m.__&&m.__(_,e),i=(n=!1)?null:e.__k,r=[],c=[],ee(e,_=e.__k=Ue(j,null,[_]),i||U,U,e.namespaceURI,i?null:e.firstChild?R.call(e.childNodes):null,r,i?i.__e:e.firstChild,n,c),xe(r,_,c)}R=be.slice,m={__e:function(_,e,t,n){for(var i,r,c;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(_)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(_,n||{}),c=i.__d),c)return i.__E=i}catch(u){_=u}throw _}},ve=0,F.prototype.setState=function(_,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=S({},this.state),typeof _=="function"&&(_=_(S({},t),this.props)),_&&S(t,_),_!=null&&this.__v&&(e&&this._sb.push(e),oe(this))},F.prototype.forceUpdate=function(_){this.__v&&(this.__e=!0,_&&this.__h.push(_),oe(this))},F.prototype.render=j,H=[],ye=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ge=function(_,e){return _.__v.__b-e.__v.__b},L.__r=0,we=/(PointerCapture)$|Capture$/i,X=0,G=ie(!1),Y=ie(!0);var Ie=0;function x(_,e,t,n,i,r){e||(e={});var c,u,f=e;if("ref"in f)for(u in f={},e)u=="ref"?c=e[u]:f[u]=e[u];var l={type:_,props:f,key:t,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ie,__i:-1,__u:0,__source:i,__self:r};if(typeof _=="function"&&(c=_.defaultProps))for(u in c)f[u]===void 0&&(f[u]=c[u]);return m.vnode&&m.vnode(l),l}var W,g,q,le,K=0,Ee=[],w=m,ce=w.__b,ue=w.__r,se=w.diffed,fe=w.__c,ae=w.unmount,pe=w.__;function Pe(_,e){w.__h&&w.__h(g,_,K||e),K=0;var t=g.__H||(g.__H={__:[],__h:[]});return _>=t.__.length&&t.__.push({}),t.__[_]}function he(_){return K=1,Le(Te,_)}function Le(_,e,t){var n=Pe(W++,2);if(n.t=_,!n.__c&&(n.__=[Te(void 0,e),function(u){var f=n.__N?n.__N[0]:n.__[0],l=n.t(f,u);f!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=g,!g.__f)){var i=function(u,f,l){if(!n.__c.__H)return!0;var a=n.__c.__H.__.filter(function(p){return!!p.__c});if(a.every(function(p){return!p.__N}))return!r||r.call(this,u,f,l);var o=n.__c.props!==u;return a.forEach(function(p){if(p.__N){var s=p.__[0];p.__=p.__N,p.__N=void 0,s!==p.__[0]&&(o=!0)}}),r&&r.call(this,u,f,l)||o};g.__f=!0;var r=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(u,f,l){if(this.__e){var a=r;r=void 0,i(u,f,l),r=a}c&&c.call(this,u,f,l)},g.shouldComponentUpdate=i}return n.__N||n.__}function V(_,e){var t=Pe(W++,3);!w.__s&&ze(t.__H,e)&&(t.__=_,t.u=e,g.__H.__h.push(t))}function We(){for(var _;_=Ee.shift();)if(_.__P&&_.__H)try{_.__H.__h.forEach(I),_.__H.__h.forEach(Q),_.__H.__h=[]}catch(e){_.__H.__h=[],w.__e(e,_.__v)}}w.__b=function(_){g=null,ce&&ce(_)},w.__=function(_,e){_&&e.__k&&e.__k.__m&&(_.__m=e.__k.__m),pe&&pe(_,e)},w.__r=function(_){ue&&ue(_),W=0;var e=(g=_.__c).__H;e&&(q===g?(e.__h=[],g.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(I),e.__h.forEach(Q),e.__h=[],W=0)),q=g},w.diffed=function(_){se&&se(_);var e=_.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&le===w.requestAnimationFrame||((le=w.requestAnimationFrame)||Re)(We)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),q=g=null},w.__c=function(_,e){e.some(function(t){try{t.__h.forEach(I),t.__h=t.__h.filter(function(n){return!n.__||Q(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],w.__e(n,t.__v)}}),fe&&fe(_,e)},w.unmount=function(_){ae&&ae(_);var e,t=_.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{I(n)}catch(i){e=i}}),t.__H=void 0,e&&w.__e(e,t.__v))};var de=typeof requestAnimationFrame=="function";function Re(_){var e,t=function(){clearTimeout(n),de&&cancelAnimationFrame(e),setTimeout(_)},n=setTimeout(t,35);de&&(e=requestAnimationFrame(t))}function I(_){var e=g,t=_.__c;typeof t=="function"&&(_.__c=void 0,t()),g=e}function Q(_){var e=g;_.__c=_.__(),g=e}function ze(_,e){return!_||_.length!==e.length||e.some(function(t,n){return t!==_[n]})}function Te(_,e){return typeof e=="function"?e(_):e}function je(_){const e=Math.floor(_/3600),t=Math.floor(_%3600/60),n=_%60;return[e,t,n].map(i=>i.toString().padStart(2,"0")).join(":")}function Oe({shop:_,productId:e,apiBase:t}){const[n,i]=he(null),[r,c]=he(null);if(V(()=>{async function v(){try{let b=`${t}/api/timers?shop=${encodeURIComponent(_)}`;e&&(b+=`&productId=${encodeURIComponent(e)}`);const y=await fetch(b);if(!y.ok)throw new Error("Failed to fetch timers");const h=await y.json();i(h[0]||null)}catch(b){console.error("Error fetching timer:",b),i(null)}}v()},[_,e,t]),V(()=>{if(!n)return;const v=new Date(n.endAt);function b(){const d=Math.max(0,Math.floor((v-new Date)/1e3));c(d)}b();const y=setInterval(b,1e3);return()=>clearInterval(y)},[n]),!n||r===null)return null;const u=n.color||"rgb(0, 200, 0)",l={Small:"1rem",Medium:"2rem",Large:"3rem"}[n.timerSize]||"2rem",a={Top:{marginBottom:"1.5rem"},Bottom:{marginTop:"1.5rem"},AboveButton:{marginBottom:"1rem"},BelowImage:{marginTop:"2rem"}}[n.timerPosition]||{},o=r<=300,p=n.urgency,s={fontSize:l,fontWeight:"bold",padding:"0.5em 1em",borderRadius:"5px",background:o&&p==="Banner"?"orange":"rgba(255,255,255,0.9)",color:u,border:o?"2px solid red":`2px solid ${u}`,boxShadow:o&&p==="Color pulse"?"0 0 10px 3px orange":void 0,animation:o&&p==="Blink"?"timer-blink 1s steps(1) infinite":void 0,textAlign:"center",transition:"all 0.5s"};return V(()=>{if(!document.getElementById("countdown-timer-widget-style")){const v=document.createElement("style");v.id="countdown-timer-widget-style",v.textContent=`
        @keyframes timer-blink { 50% { opacity: 0; } }
      `,document.head.appendChild(v)}},[]),x("div",{style:a,children:x("div",{style:s,children:[n.promotion&&x("div",{style:{marginBottom:8},children:n.promotion}),r>0?x("span",{children:["Offer ends in ",x("strong",{children:je(r)})," ",o&&p==="Banner"&&x("span",{style:{marginLeft:8},children:"âš¡ Hurry!"})]}):x("span",{children:"Offer expired"})]})})}const me=document.getElementById("countdown-timer-root");if(me){const _=window.Shopify&&window.Shopify.shop?window.Shopify.shop:"fyzstoree.myshopify.com",e=window.Shopify&&window.Shopify.product?window.Shopify.product.id:void 0,t=window.SHOPIFY_API_BASE_URL||"https://shopify-discountapp-production.up.railway.app";Fe(x(Oe,{shop:_,productId:e,apiBase:t}),me)}
